# myschool-mosreg-api
Неофициальная документация API для системы "Моя Школа" в Московском регионе. Этот список не полон.

## Получение `Auth-Token` и `Authorization`[^1]
1. Из ссылки после входа (`https://authedu.mosreg.ru/auth/callback/(токен)`)
2. Из запроса (отправлен в `Headers` у запроса от клиента)

## Предположения
`X-mes-subsystem` не может быть убран из запроса и всегда установлен на`familyweb`  
`X-mes-role` всегда установлен на `student`[^2]  
Возможно используется Bearer  

## API[^3]
**Начало ссылки: `https://authedu.mosreg.ru/api/`**

| Ссылка API                               | Использование                   | Требует (`Header`-ы)                                                            | Ответ от сервера      |
| ---------------------------------------- | ------------------------------- | ------------------------------------------------------------------------------- | --------------------- |
| `family/web/v1/profile`                  | Получение инфо. о пользователе  | `Auth-Token`, `Authorization`, `X-mes-Subsystem`                                | Профиль               |
| `eventcalendar/v1/api/events`[^4]        | Получение расписания            | `Auth-Token`, `Authorization`, `X-mes-Subsystem`, `X-mes-Role`,                 | Расписание            |
| `family/web/v1/lesson_schedule_items`    | Получение инфо. об уроке        | `Auth-Token`, `Authorization`, `X-mes-Subsystem`, параметр ссылки `student_id`  | Инфо. об уроке        |

### Примечания
[^1]: Без имплементации логина в приложении/боте
[^2]: В случае запроса к API учеников
[^3]: Этот список минимален. В нем достаточно для минимального функционала самописного приложения/бота.
[^4]: Рекомендуется устанавливать параметры ссылки `person_ids`, `begin_date` и `end_date` для исключения неправильных данных.
